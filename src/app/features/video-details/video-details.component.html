<div class="video-details-container">
    <div class="watch-comment-section">
        <div class='watch-section'>
            <video [src]="videoDetails?.videoPath" controls width="100%"></video>

            <h1 class="video-title">{{videoDetails?.title}}</h1>

            <div class="tags" *ngIf="videoTags.length">
                <span class="tag-pill" *ngFor="let tag of videoTags">{{ tag }}</span>
            </div>
            <div class="watch-metadata">
                <span class="channel">
                    <mat-icon>person</mat-icon>
                    <a *ngIf="videoDetails?.authorUsername" [routerLink]="['/profile', videoDetails!.authorUsername]">
                      {{videoDetails?.authorUsername}}
                    </a>
                </span>

                <span class="watch-metadata-controls">
                    <span class="view-count">
                        <mat-icon>remove_red_eye</mat-icon> {{videoDetails?.viewCount}} 
                    </span>
                    <span class="created-date">
                        {{videoDetails?.createdAt | date:'dd.MM.yyyy'}}
                    </span>
                    <span class="like-dislike">
                        <span class="like" (click)="handleLike()">
                            <mat-icon>thumb_up</mat-icon>
                        </span>
                        <span class="dislike" (click)="handleDislike()">
                            <mat-icon>thumb_down</mat-icon>
                        </span>
                    </span>
                    <span class="share">
                        <mat-icon>share</mat-icon>
                    </span>
                </span>
            </div>
            <div class="video-description">
                <h4>Opis</h4>
                <p>{{videoDetails?.description}}</p>
            </div>
        </div>
        <div class="comment-section">
            <ng-container *ngIf="isLoggedIn; else loginToComment">
                <!-- Komponenta za unos komentara, ako postoji -->
            </ng-container>
            <ng-template #loginToComment>
                <div class="alert alert-info">Morate biti prijavljeni da biste komentarisali.</div>
            </ng-template>
            <i *ngIf="!isLoggedIn">Komentari idu ovde</i>
        </div>
    </div>
    
    <div class="suggested-section">
        <h2>Preporučujemo</h2>
        <div class="suggested-videos">
            <a
                class="suggested-card"
                *ngFor="let video of suggestedVideos"
                [routerLink]="['/watch', video.draftId]"
            >
                <div class="suggested-thumbnail">
                    <img
                        [src]="getThumbnailUrl(video.draftId)"
                        [alt]="video.title"
                    />
                </div>
                <div class="suggested-info">
                    <h3 class="suggested-title">{{ video.title }}</h3>
                    <p class="suggested-meta">
                        {{ video.authorUsername }} 
                        • {{ video.viewCount }} pregleda 
                        • {{ video.createdAt | date:'dd.MM.yyyy' }}
                    </p>
                </div>
            </a>
        </div>
    </div>
</div>
